(()=>{var a={};a.id=801,a.ids=[801],a.modules={261:a=>{"use strict";a.exports=require("next/dist/shared/lib/router/utils/app-paths")},846:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:a=>{"use strict";a.exports=require("http")},3033:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3222:(a,b,c)=>{"use strict";c.r(b),c.d(b,{handler:()=>V,patchFetch:()=>U,routeModule:()=>Q,serverHooks:()=>T,workAsyncStorage:()=>R,workUnitAsyncStorage:()=>S});var d={};c.r(d),c.d(d,{POST:()=>N});var e=c(6559),f=c(8088),g=c(7719),h=c(6191),i=c(1289),j=c(261),k=c(2603),l=c(9893),m=c(4823),n=c(7220),o=c(6946),p=c(7912),q=c(9786),r=c(6143),s=c(6439),t=c(3365),u=c(2190),v=c(3908),w=c(804),x=c(6048),y=c(2042),z=c(4343),A=c(7159);let B=BigInt(-1),C=BigInt(0),D=BigInt(1),E=BigInt(5),F={},G="0000";for(;G.length<80;)G+=G;function H(a){let b=G;for(;b.length<a;)b+=b;return BigInt("1"+b.substring(0,a))}function I(a,b,c){let d=BigInt(b.width);if(b.signed){let b=D<<d-D;(0,x.vA)(null==c||a>=-b&&a<b,"overflow","NUMERIC_FAULT",{operation:c,fault:"overflow",value:a}),a=a>C?(0,z.ST)((0,z.dK)(a,d),d):-(0,z.ST)((0,z.dK)(-a,d),d)}else{let b=D<<d;(0,x.vA)(null==c||a>=0&&a<b,"overflow","NUMERIC_FAULT",{operation:c,fault:"overflow",value:a}),a=(a%b+b)%b&b-D}return a}function J(a){"number"==typeof a&&(a=`fixed128x${a}`);let b=!0,c=128,d=18;if("string"==typeof a)if("fixed"===a);else if("ufixed"===a)b=!1;else{let e=a.match(/^(u?)fixed([0-9]+)x([0-9]+)$/);(0,x.MR)(e,"invalid fixed format","format",a),b="u"!==e[1],c=parseInt(e[2]),d=parseInt(e[3])}else if(a){let e=a,f=(a,b,c)=>null==e[a]?c:((0,x.MR)(typeof e[a]===b,"invalid fixed format ("+a+" not "+b+")","format."+a,e[a]),e[a]);b=f("signed","boolean",b),c=f("width","number",c),d=f("decimals","number",d)}(0,x.MR)(c%8==0,"invalid FixedNumber width (not byte aligned)","format.width",c),(0,x.MR)(d<=80,"invalid FixedNumber decimals (too large)","format.decimals",d);let e=(b?"":"u")+"fixed"+String(c)+"x"+String(d);return{signed:b,width:c,decimals:d,name:e}}class K{format;#a;#b;#c;_value;constructor(a,b,c){(0,x.gk)(a,F,"FixedNumber"),this.#b=b,this.#a=c;let d=function(a,b){let c="";a<C&&(c="-",a*=B);let d=a.toString();if(0===b)return c+d;for(;d.length<=b;)d=G+d;let e=d.length-b;for(d=d.substring(0,e)+"."+d.substring(e);"0"===d[0]&&"."!==d[1];)d=d.substring(1);for(;"0"===d[d.length-1]&&"."!==d[d.length-2];)d=d.substring(0,d.length-1);return c+d}(b,c.decimals);(0,A.n)(this,{format:c.name,_value:d}),this.#c=H(c.decimals)}get signed(){return this.#a.signed}get width(){return this.#a.width}get decimals(){return this.#a.decimals}get value(){return this.#b}#d(a){(0,x.MR)(this.format===a.format,"incompatible format; use fixedNumber.toFormat","other",a)}#e(a,b){return new K(F,a=I(a,this.#a,b),this.#a)}#f(a,b){return this.#d(a),this.#e(this.#b+a.#b,b)}addUnsafe(a){return this.#f(a)}add(a){return this.#f(a,"add")}#g(a,b){return this.#d(a),this.#e(this.#b-a.#b,b)}subUnsafe(a){return this.#g(a)}sub(a){return this.#g(a,"sub")}#h(a,b){return this.#d(a),this.#e(this.#b*a.#b/this.#c,b)}mulUnsafe(a){return this.#h(a)}mul(a){return this.#h(a,"mul")}mulSignal(a){this.#d(a);let b=this.#b*a.#b;return(0,x.vA)(b%this.#c===C,"precision lost during signalling mul","NUMERIC_FAULT",{operation:"mulSignal",fault:"underflow",value:this}),this.#e(b/this.#c,"mulSignal")}#i(a,b){return(0,x.vA)(a.#b!==C,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#d(a),this.#e(this.#b*this.#c/a.#b,b)}divUnsafe(a){return this.#i(a)}div(a){return this.#i(a,"div")}divSignal(a){(0,x.vA)(a.#b!==C,"division by zero","NUMERIC_FAULT",{operation:"div",fault:"divide-by-zero",value:this}),this.#d(a);let b=this.#b*this.#c;return(0,x.vA)(b%a.#b===C,"precision lost during signalling div","NUMERIC_FAULT",{operation:"divSignal",fault:"underflow",value:this}),this.#e(b/a.#b,"divSignal")}cmp(a){let b=this.value,c=a.value,d=this.decimals-a.decimals;return(d>0?c*=H(d):d<0&&(b*=H(-d)),b<c)?-1:+(b>c)}eq(a){return 0===this.cmp(a)}lt(a){return 0>this.cmp(a)}lte(a){return 0>=this.cmp(a)}gt(a){return this.cmp(a)>0}gte(a){return this.cmp(a)>=0}floor(){let a=this.#b;return this.#b<C&&(a-=this.#c-D),a=this.#b/this.#c*this.#c,this.#e(a,"floor")}ceiling(){let a=this.#b;return this.#b>C&&(a+=this.#c-D),a=this.#b/this.#c*this.#c,this.#e(a,"ceiling")}round(a){if(null==a&&(a=0),a>=this.decimals)return this;let b=this.decimals-a,c=E*H(b-1),d=this.value+c,e=H(b);return I(d=d/e*e,this.#a,"round"),new K(F,d,this.#a)}isZero(){return this.#b===C}isNegative(){return this.#b<C}toString(){return this._value}toUnsafeFloat(){return parseFloat(this.toString())}toFormat(a){return K.fromString(this.toString(),a)}static fromValue(a,b,c){let d=null==b?0:(0,z.WZ)(b),e=J(c),f=(0,z.Ab)(a,"value"),g=d-e.decimals;if(g>0){let b=H(g);(0,x.vA)(f%b===C,"value loses precision for format","NUMERIC_FAULT",{operation:"fromValue",fault:"underflow",value:a}),f/=b}else g<0&&(f*=H(-g));return I(f,e,"fromValue"),new K(F,f,e)}static fromString(a,b){let c=a.match(/^(-?)([0-9]*)\.?([0-9]*)$/);(0,x.MR)(c&&c[2].length+c[3].length>0,"invalid FixedNumber string value","value",a);let d=J(b),e=c[2]||"0",f=c[3]||"";for(;f.length<d.decimals;)f+=G;(0,x.vA)(f.substring(d.decimals).match(/^0*$/),"too many decimals for format","NUMERIC_FAULT",{operation:"fromString",fault:"underflow",value:a}),f=f.substring(0,d.decimals);let g=BigInt(c[1]+e+f);return I(g,d,"fromString"),new K(F,g,d)}static fromBytes(a,b){let c=(0,z.Dg)((0,y.q5)(a,"value")),d=J(b);return d.signed&&(c=(0,z.ST)(c,d.width)),I(c,d,"fromBytes"),new K(F,c,d)}}let L=["wei","kwei","mwei","gwei","szabo","finney","ether"];var M=c(2376);async function N(a){try{let{address:b}=await a.json();if(!b||!v.PW(b))return u.NextResponse.json({success:!1,error:"Invalid contract address"},{status:400});let c=process.env.ETH_RPC_URL;if(!c){let a=P(b);return u.NextResponse.json({success:!0,analysis:a})}let d=new w.FR(c),e=await O(d,b);return u.NextResponse.json({success:!0,analysis:e})}catch(d){console.error("Contract analysis error:",d);let{address:b}=await a.json().catch(()=>({address:"0x0"})),c=P(b);return u.NextResponse.json({success:!0,analysis:c})}}async function O(a,b){try{let c=await a.getCode(b),d=c.length/2-1,e={storageAccess:(c.match(/60[0-9a-f]{2}54/g)||[]).length,externalCalls:(c.match(/f0/g)||[]).length,memoryOperations:(c.match(/60[0-9a-f]{2}52/g)||[]).length,calldataUsage:(c.match(/36/g)||[]).length},f=e.storageAccess+2*e.externalCalls+e.memoryOperations,g=[];e.storageAccess>5&&g.push({type:"storage_packing",priority:"high",description:"Multiple storage accesses detected - consider packing related data",gas_savings:`${2e3*e.storageAccess} gas per transaction`,implementation:"Use structs to pack multiple uint128 values into single slots"}),e.memoryOperations>e.calldataUsage&&g.push({type:"calldata_optimization",priority:"medium",description:"High memory usage - consider using calldata for read-only parameters",gas_savings:`${1e3*e.memoryOperations} gas per function call`,implementation:"Replace memory parameters with calldata for read-only functions"}),e.externalCalls>2&&g.push({type:"batch_operations",priority:"medium",description:"Multiple external calls detected - consider batching operations",gas_savings:`${5e3*e.externalCalls} gas per batch`,implementation:"Implement batch processing to reduce external call overhead"});let h=e.externalCalls>5?"Medium":e.storageAccess>10?"Hard":"Easy",i=e.externalCalls>5?"Medium":e.storageAccess>10?"High":"Low",j=e.externalCalls>5?"Gradual Migration with Testing":e.storageAccess>10?"Phased Migration with Optimization":"Direct Migration",k=e.externalCalls>5?"1 week":e.storageAccess>10?"2 weeks":"2 hours",l=await a.getFeeData(),m=function(a,b){let c=18;if("string"==typeof b){let a=L.indexOf(b);(0,x.MR)(a>=0,"invalid unit","unit",b),c=3*a}else null!=b&&(c=(0,z.WZ)(b,"unit"));return K.fromValue(a,c,{decimals:c,width:512}).toString()}(l.gasPrice,"gwei"),n=2e4*e.storageAccess,o=5e3*e.memoryOperations,p=(21e3+n+o)*parseFloat(m)*1e-9,q=.05*p,r=((p-q)/p*100).toFixed(1),s="Unknown Contract";try{let c=new M.NZ(b,["function name() view returns (string)"],a);s=await c.name()}catch{}return{contract:{address:b,name:s,size:`${(d/1024).toFixed(1)} KB`,complexity:f<10?"Low":f<30?"Medium":"High",functions:Math.max(3,e.externalCalls+e.storageAccess/2),storage_slots:e.storageAccess,external_calls:e.externalCalls},migration:{difficulty:h,estimated_time:k,risk_level:i,compatibility_score:95,strategy:j},gas_analysis:{current_ethereum_cost:`$${p.toFixed(2)}`,estimated_arbitrum_cost:`$${q.toFixed(2)}`,savings_percentage:r,annual_savings:`$${(p-q)*3650}`},optimizations:g.length>0?g:[{type:"storage_packing",priority:"high",description:"Pack uint128 values into single storage slot",gas_savings:"15,000 gas per transaction",implementation:"struct UserData { uint128 balance; uint128 lastUpdate; }"},{type:"calldata_optimization",priority:"medium",description:"Use calldata instead of memory for read-only parameters",gas_savings:"2,000 gas per function call",implementation:"function process(bytes calldata data) external"}],security:{reentrancy_safe:e.externalCalls<3,access_control:e.storageAccess>0,safe_math:!0,risk_score:Math.min(100,10*e.externalCalls+5*e.storageAccess)}}}catch(a){throw console.error("Analysis error:",a),a}}function P(a){return{contract:{address:a,name:"Sample Contract",size:"2.3 KB",complexity:"Medium",functions:8,storage_slots:3,external_calls:2},migration:{difficulty:"Easy",estimated_time:"2 hours",risk_level:"Low",compatibility_score:95},gas_analysis:{current_ethereum_cost:"$25.00",estimated_arbitrum_cost:"$0.10",savings_percentage:99.6,annual_savings:"$16,500"},optimizations:[{type:"storage_packing",priority:"high",description:"Pack uint128 values into single storage slot",gas_savings:"15,000 gas per transaction",implementation:"struct UserData { uint128 balance; uint128 lastUpdate; }"},{type:"calldata_optimization",priority:"medium",description:"Use calldata instead of memory for read-only parameters",gas_savings:"2,000 gas per function call",implementation:"function process(bytes calldata data) external"}]}}let Q=new e.AppRouteRouteModule({definition:{kind:f.RouteKind.APP_ROUTE,page:"/api/analyze-contract/route",pathname:"/api/analyze-contract",filename:"route",bundlePath:"app/api/analyze-contract/route"},distDir:".next",projectDir:"",resolvedPagePath:"/Users/mac/flowport/app/api/analyze-contract/route.js",nextConfigOutput:"",userland:d}),{workAsyncStorage:R,workUnitAsyncStorage:S,serverHooks:T}=Q;function U(){return(0,g.patchFetch)({workAsyncStorage:R,workUnitAsyncStorage:S})}async function V(a,b,c){var d;let e="/api/analyze-contract/route";"/index"===e&&(e="/");let g=await Q.prepare(a,b,{srcPage:e,multiZoneDraftMode:"false"});if(!g)return b.statusCode=400,b.end("Bad Request"),null==c.waitUntil||c.waitUntil.call(c,Promise.resolve()),null;let{buildId:u,params:v,nextConfig:w,isDraftMode:x,prerenderManifest:y,routerServerContext:z,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,resolvedPathname:C}=g,D=(0,j.normalizeAppPath)(e),E=!!(y.dynamicRoutes[D]||y.routes[C]);if(E&&!x){let a=!!y.routes[C],b=y.dynamicRoutes[D];if(b&&!1===b.fallback&&!a)throw new s.NoFallbackError}let F=null;!E||Q.isDev||x||(F="/index"===(F=C)?"/":F);let G=!0===Q.isDev||!E,H=E&&!G,I=a.method||"GET",J=(0,i.getTracer)(),K=J.getActiveScopeSpan(),L={params:v,prerenderManifest:y,renderOpts:{experimental:{dynamicIO:!!w.experimental.dynamicIO,authInterrupts:!!w.experimental.authInterrupts},supportsDynamicResponse:G,incrementalCache:(0,h.getRequestMeta)(a,"incrementalCache"),cacheLifeProfiles:null==(d=w.experimental)?void 0:d.cacheLife,isRevalidate:H,waitUntil:c.waitUntil,onClose:a=>{b.on("close",a)},onAfterTaskError:void 0,onInstrumentationRequestError:(b,c,d)=>Q.onRequestError(a,b,d,z)},sharedContext:{buildId:u}},M=new k.NodeNextRequest(a),N=new k.NodeNextResponse(b),O=l.NextRequestAdapter.fromNodeNextRequest(M,(0,l.signalFromNodeResponse)(b));try{let d=async c=>Q.handle(O,L).finally(()=>{if(!c)return;c.setAttributes({"http.status_code":b.statusCode,"next.rsc":!1});let d=J.getRootSpanAttributes();if(!d)return;if(d.get("next.span_type")!==m.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${d.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let e=d.get("next.route");if(e){let a=`${I} ${e}`;c.setAttributes({"next.route":e,"http.route":e,"next.span_name":a}),c.updateName(a)}else c.updateName(`${I} ${a.url}`)}),g=async g=>{var i,j;let k=async({previousCacheEntry:f})=>{try{if(!(0,h.getRequestMeta)(a,"minimalMode")&&A&&B&&!f)return b.statusCode=404,b.setHeader("x-nextjs-cache","REVALIDATED"),b.end("This page could not be found"),null;let e=await d(g);a.fetchMetrics=L.renderOpts.fetchMetrics;let i=L.renderOpts.pendingWaitUntil;i&&c.waitUntil&&(c.waitUntil(i),i=void 0);let j=L.renderOpts.collectedTags;if(!E)return await (0,o.I)(M,N,e,L.renderOpts.pendingWaitUntil),null;{let a=await e.blob(),b=(0,p.toNodeOutgoingHttpHeaders)(e.headers);j&&(b[r.NEXT_CACHE_TAGS_HEADER]=j),!b["content-type"]&&a.type&&(b["content-type"]=a.type);let c=void 0!==L.renderOpts.collectedRevalidate&&!(L.renderOpts.collectedRevalidate>=r.INFINITE_CACHE)&&L.renderOpts.collectedRevalidate,d=void 0===L.renderOpts.collectedExpire||L.renderOpts.collectedExpire>=r.INFINITE_CACHE?void 0:L.renderOpts.collectedExpire;return{value:{kind:t.CachedRouteKind.APP_ROUTE,status:e.status,body:Buffer.from(await a.arrayBuffer()),headers:b},cacheControl:{revalidate:c,expire:d}}}}catch(b){throw(null==f?void 0:f.isStale)&&await Q.onRequestError(a,b,{routerKind:"App Router",routePath:e,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:H,isOnDemandRevalidate:A})},z),b}},l=await Q.handleResponse({req:a,nextConfig:w,cacheKey:F,routeKind:f.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:y,isRoutePPREnabled:!1,isOnDemandRevalidate:A,revalidateOnlyGenerated:B,responseGenerator:k,waitUntil:c.waitUntil});if(!E)return null;if((null==l||null==(i=l.value)?void 0:i.kind)!==t.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==l||null==(j=l.value)?void 0:j.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,h.getRequestMeta)(a,"minimalMode")||b.setHeader("x-nextjs-cache",A?"REVALIDATED":l.isMiss?"MISS":l.isStale?"STALE":"HIT"),x&&b.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let m=(0,p.fromNodeOutgoingHttpHeaders)(l.value.headers);return(0,h.getRequestMeta)(a,"minimalMode")&&E||m.delete(r.NEXT_CACHE_TAGS_HEADER),!l.cacheControl||b.getHeader("Cache-Control")||m.get("Cache-Control")||m.set("Cache-Control",(0,q.getCacheControlHeader)(l.cacheControl)),await (0,o.I)(M,N,new Response(l.value.body,{headers:m,status:l.value.status||200})),null};K?await g(K):await J.withPropagatedContext(a.headers,()=>J.trace(m.BaseServerSpan.handleRequest,{spanName:`${I} ${a.url}`,kind:i.SpanKind.SERVER,attributes:{"http.method":I,"http.target":a.url}},g))}catch(b){if(K||b instanceof s.NoFallbackError||await Q.onRequestError(a,b,{routerKind:"App Router",routePath:D,routeType:"route",revalidateReason:(0,n.c)({isRevalidate:H,isOnDemandRevalidate:A})}),E)throw b;return await (0,o.I)(M,N,new Response(null,{status:500})),null}}},3295:a=>{"use strict";a.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},4075:a=>{"use strict";a.exports=require("zlib")},4870:a=>{"use strict";a.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5511:a=>{"use strict";a.exports=require("crypto")},5591:a=>{"use strict";a.exports=require("https")},6439:a=>{"use strict";a.exports=require("next/dist/shared/lib/no-fallback-error.external")},6487:()=>{},7598:a=>{"use strict";a.exports=require("node:crypto")},8335:()=>{},9294:a=>{"use strict";a.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var b=require("../../../webpack-runtime.js");b.C(a);var c=b.X(0,[985,55,804],()=>b(b.s=3222));module.exports=c})();